# 프로그램 구조

## 개요
이 프로그램은 기존의 챗봇 기능을 확장하고 개선하여 사용자에게 더 다양한 정보와 서비스를 제공하고자 합니다. 기존 기능에서 오늘의 운세와 일별 박스오피스 순위 조회를 추가하고, 날씨 출력을 개선할 예정입니다. 또한 업로드된 이미지를 OCR로 처리하는 기능을 추가할 것입니다. 

## 디렉토리 및 파일

### chatbot 디렉토리
- **__init__.py**
  - **설명**: 챗봇의 주요 클래스와 함수들을 포함하는 초기화 파일입니다.
  - **주요 클래스 및 메소드**:
    - `Chat`: 챗봇의 핵심 로직을 담당하는 클래스입니다.
    - `MultiFunctionCall`: 여러 함수 호출을 관리하는 클래스입니다.
    - `register_call`: 사용자가 입력한 질문을 받아 답변을 호출하는 함수입니다.

- **chatbot_test.py**
  - **설명**: 챗봇의 launcher 기능등을 수행하는 스크립트입니다.
  - **주요 메소드**:
    - `do_you_know`: 주어진 쿼리에 대한 지식을 응답하는 함수입니다.
    - `who_is`: 위키피디아에서 주어진 쿼리에 대한 요약을 응답하는 함수입니다.
    -  `call_weather` : 지정된 도시의 날씨 정보를 비동기적으로 가져와서 출력하고 반환하는 함수입니다. 
        -  `get_weather` : 비동기적으로 날씨 정보를 가져와 사용자가 읽기 쉬운 형태로 포맷팅합니다.
    -  `get_horoscope(session=None, sign = 'leo')` :  별자리를 입력받아 랜덤으로 오늘의 운세를 하나 출력합니다.
        -  horoscope_data.py : 오늘의 운세에 사용할 멘트를 모아놓은 리스트.
    - `box_office_ranking`: 최신 박스오피스 순위를 응답하는 함수입니다.

- **chatbot_test.template**
  - **설명**: 챗봇의 대답 템플릿을 모아놓는 파일입니다.

- **constants.py**
  - **설명**: 프로그램에서 사용되는 상수를 정의하는 파일입니다.
  - **주요 상수**:
    - `FIRST_QUESTIONS`: 언어별 첫 번째 질문을 정의합니다.
    - `TERMINATES`: 언어별 종료 명령어를 정의합니다.
    - `LANGUAGE_SUPPORT`: 지원되는 언어 목록을 정의합니다.

- **mapper.py**
  - **설명**: 세션 관리와 대화 기록을 처리하는 파일입니다.
  - **주요 클래스**:
    - `Session`: 개별 세션을 관리하는 클래스입니다.
    - `Conversation`: 대화 기록을 관리하는 클래스입니다.
    - `SessionHandler`: 여러 세션을 관리하는 클래스입니다.

- **substitution 디렉토리**
  - **__init__.py**
    - **설명**: 텍스트에 가중치를 입력하는 기능을 제공하는 클래스 파일입니다.
    - **주요 클래스**:
      - `Substitution`: 가중치 규칙을 로드하고 적용하는 클래스입니다.

- **spellcheck 디렉토리**
  - **__init__.py**
    - **설명**: 철자 검사 기능을 제공하는 클래스 파일입니다.
    - **주요 클래스**:
      - `SpellChecker`: 철자 검사를 수행하는 클래스입니다.

- **chat_gui 디렉토리**
  - **__init__.py**
    - **설명**: GUI를 통해 사용자와 상호작용하는 클래스를 정의하는 파일입니다.
    - **주요 클래스**:
      - `ChatGUI`: GUI를 초기화하고 사용자와 챗봇 간의 상호작용을 처리하는 클래스입니다.
      - **주요 메소드**:
        - `__init__`: GUI를 초기화합니다.
        - `show_bubble`: 텍스트 버블을 표시합니다.
        - `show_image_bubble`: 이미지 버블을 표시합니다.
        - `add_user_message`: 사용자 메시지를 추가합니다.
        - `add_bot_message`: 봇 메시지를 추가합니다.
        - `process_message`: 사용자의 메시지를 처리합니다.
        - `user_input_handler`: 사용자의 입력을 처리합니다.
        - `user_input_box_handler`: 멀티라인 입력을 처리하는 헬퍼 메소드입니다.
        - `upload_image`: 이미지를 업로드하는 기능을 처리합니다.
        - `process_image`: 업로드된 이미지를 OCR로 처리하는 기능을 처리합니다.



